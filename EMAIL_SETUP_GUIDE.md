# üìß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Email –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å: ‚ùå –ù–ï –ù–ê–°–¢–†–û–ï–ù–û

Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–∫–∞–∑–∞—Ö **–ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è**, —Ç–∞–∫ –∫–∞–∫ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã SMTP –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.

---

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (Gmail)

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Gmail

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://myaccount.google.com/security
2. –í–∫–ª—é—á–∏—Ç–µ **–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é** (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –≤–∫–ª—é—á–µ–Ω–∞)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://myaccount.google.com/apppasswords
4. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
   - –ù–∞–∑–≤–∞–Ω–∏–µ: "Bazaar Marketplace"
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å (—Ñ–æ—Ä–º–∞—Ç: xxxx xxxx xxxx xxxx)

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ .env —Ñ–∞–π–ª

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `/app/backend/.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ) —Å—Ç—Ä–æ–∫–∏:

```bash
# Email Notifications
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=–≤–∞—à-email@gmail.com
SMTP_PASSWORD=xxxx-xxxx-xxxx-xxxx
FROM_EMAIL=–≤–∞—à-email@gmail.com
ADMIN_EMAIL=admin@bazaar.com
```

**–ó–∞–º–µ–Ω–∏—Ç–µ:**
- `–≤–∞—à-email@gmail.com` - –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π Gmail
- `xxxx-xxxx-xxxx-xxxx` - –Ω–∞ –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ —à–∞–≥–∞ 1
- `admin@bazaar.com` - –Ω–∞ email, –∫—É–¥–∞ –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–∫–∞–∑–∞—Ö

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend

```bash
sudo supervisorctl restart backend
```

### –®–∞–≥ 4: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ

–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ —á–µ—Ä–µ–∑ —Å–∞–π—Ç. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç—É - –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–π—Ç–∏ 2 –ø–∏—Å—å–º–∞:
1. –ü–æ–∫—É–ø–∞—Ç–µ–ª—é - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
2. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–º –∑–∞–∫–∞–∑–µ

---

## üìÆ –ß—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

### 1. –ü–æ–∫—É–ø–∞—Ç–µ–ª—é (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞)

**–¢–µ–º–∞:** –ó–∞–∫–∞–∑ #ORD-20241203-XXXXXXXX –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:**
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- –ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞
- –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∏ —Ü–µ–Ω–∞–º–∏
- –û–±—â–∞—è —Å—É–º–º–∞
- –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞
- –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã

**–î–∏–∑–∞–π–Ω:** –ö—Ä–∞—Å–∏–≤—ã–π HTML-—à–∞–±–ª–æ–Ω —Å —Å–∏–Ω–∏–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º

### 2. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É (–Ω–æ–≤—ã–π –∑–∞–∫–∞–∑)

**–¢–µ–º–∞:** üîî –ù–æ–≤—ã–π –∑–∞–∫–∞–∑ #ORD-20241203-XXXXXXXX

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:**
- üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–º –∑–∞–∫–∞–∑–µ
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ (–∏–º—è, email, ID)
- –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
- –°—É–º–º–∞ –∑–∞–∫–∞–∑–∞
- –°—Ç–∞—Ç—É—Å

**–î–∏–∑–∞–π–Ω:** HTML-—à–∞–±–ª–æ–Ω —Å –∑–µ–ª–µ–Ω—ã–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º

---

## üîß –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ SMTP –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

### Outlook/Hotmail

```bash
SMTP_SERVER=smtp-mail.outlook.com
SMTP_PORT=587
SMTP_USER=–≤–∞—à-email@outlook.com
SMTP_PASSWORD=–≤–∞—à-–ø–∞—Ä–æ–ª—å
```

### Yandex

```bash
SMTP_SERVER=smtp.yandex.ru
SMTP_PORT=465
SMTP_USER=–≤–∞—à-email@yandex.ru
SMTP_PASSWORD=–≤–∞—à-–ø–∞—Ä–æ–ª—å
```

### Mail.ru

```bash
SMTP_SERVER=smtp.mail.ru
SMTP_PORT=465
SMTP_USER=–≤–∞—à-email@mail.ru
SMTP_PASSWORD=–≤–∞—à-–ø–∞—Ä–æ–ª—å
```

### SendGrid (–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π)

```bash
SMTP_SERVER=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=–≤–∞—à-sendgrid-api-key
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –ª–æ–≥–∏

```bash
tail -f /var/log/supervisor/backend.err.log | grep -i email
```

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ —É–≤–∏–¥–∏—Ç–µ:
- `‚úÖ Email sent successfully to customer@email.com`
- `‚úÖ Email sent successfully to admin@bazaar.com`

–ò–ª–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ:
- `‚ùå Failed to send email: ...`

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç

```python
python3 << 'EOF'
from email_service import email_service

# Test email
result = email_service.send_email(
    to_email="test@example.com",
    subject="Test Email",
    html_content="<h1>This is a test</h1>"
)

print(f"Email sent: {result}")
EOF
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: Authentication failed

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å –∏–ª–∏ –Ω–µ –≤–∫–ª—é—á–µ–Ω–∞ –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ **–ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**, –∞ –Ω–µ –æ–±—ã—á–Ω—ã–π –ø–∞—Ä–æ–ª—å
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∞

### –û—à–∏–±–∫–∞: Connection timeout

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π SMTP —Å–µ—Ä–≤–µ—Ä –∏–ª–∏ –ø–æ—Ä—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `SMTP_SERVER` –∏ `SMTP_PORT`
2. –î–ª—è Gmail: `smtp.gmail.com:587`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª

### –ü–∏—Å—å–º–∞ –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç (–Ω–µ—Ç –æ—à–∏–±–æ–∫)

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–∏—Å—å–º–∞ –ø–æ–ø–∞–¥–∞—é—Ç –≤ —Å–ø–∞–º

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–ø–∫—É "–°–ø–∞–º"
2. –î–æ–±–∞–≤—å—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –≤ –∫–æ–Ω—Ç–∞–∫—Ç—ã
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SPF/DKIM –∑–∞–ø–∏—Å–∏ (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–í–ê–ñ–ù–û:**
1. ‚ùó –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª –≤ git
2. ‚ùó –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–æ–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∞ –Ω–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–æ–ª–∏
3. ‚ùó –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ SMTP —Å–µ—Ä–≤–∏—Å—ã (SendGrid, Mailgun)
4. ‚ùó –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –ø–∏—Å–µ–º (rate limiting)

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°–∫–æ–ª—å–∫–æ –ø–∏—Å–µ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `/var/log/supervisor/backend.err.log`:

```bash
grep "Email sent successfully" /var/log/supervisor/backend.err.log | wc -l
```

### –û—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏

```bash
grep "Failed to send email" /var/log/supervisor/backend.err.log
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ü–æ–ª—É—á–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Gmail
2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç–µ `/app/backend/.env`
3. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend
4. ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç—É

**–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Å–µ email –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–æ–≤–æ–º –∑–∞–∫–∞–∑–µ!**

---

## üìû –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -f /var/log/supervisor/backend.err.log`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ backend –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è .env
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ SMTP –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ .env
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –≤—ã—à–µ

**–ì–æ—Ç–æ–≤–æ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ!** üöÄ
